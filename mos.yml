author: Your Name
description: Coin counter example for Mongoose OS
version: 1.0

manifest_version: 2017-09-29

libs_version: ${mos.version}
modules_version: ${mos.version}
mongoose_os_version: ${mos.version}

tags:
  - c

sources:
  - src

filesystem:
  - fs

libs:
  #- origin: https://github.com/mongoose-os-libs/boards
  #- origin: https://github.com/mongoose-os-libs/js-demo-bundle
  - origin: https://github.com/mongoose-os-libs/core
  - origin: https://github.com/mongoose-os-libs/ca-bundle
  - origin: https://github.com/mongoose-os-libs/rpc-service-config
  - origin: https://github.com/mongoose-os-libs/rpc-service-fs
  - origin: https://github.com/mongoose-os-libs/rpc-service-i2c
  - origin: https://github.com/mongoose-os-libs/rpc-uart
  - origin: https://github.com/mongoose-os-libs/rpc-service-gpio
  #- origin: https://github.com/mongoose-os-libs/mjs 
  - origin: https://github.com/mongoose-os-libs/wifi
  - origin: https://github.com/mongoose-os-libs/sntp
  #- origin: https://github.com/mongoose-os-libs/ota-http-server
  - origin: https://github.com/mongoose-os-libs/rpc-service-ota
  - origin: https://github.com/mongoose-os-libs/dash
  #- origin: https://github.com/mongoose-os-libs/shadow
  - origin: https://github.com/mongoose-os-libs/file-logger
  - origin: https://github.com/mongoose-os-libs/i2c
  - origin: https://github.com/mongoose-os-libs/ds3231
  - origin: https://github.com/mongoose-os-libs/mqtt
  - origin: https://github.com/mongoose-os-libs/rpc-mqtt


config_schema:
  - ["app.total_bag", "f", 0.0, {title: "Total Bag"}]
  - ["coin.pin", "i", 26, {title: "Coin pin"}]
  - ["coin.count_file", "s", "/counters.json", {title: "Coin count file"}]
  - ["coin.report_delay", "i", 5000, {title: "Coin report delay in ms"}]
  - ["app.machine_on", "b", false, {title: "Machine on state"}]

  - ["wifi.sta1.ssid", "Inventoteca_2G"]
  - ["wifi.sta1.pass", "science_7425"]
  - ["wifi.sta1.enable", true]
  - ["wifi.sta2.ssid", "4G-MIFI-C91"]
  - ["wifi.sta2.pass", "1234567890"]
  - ["wifi.sta2.enable", true]
  - ["wifi.sta.ssid", "PAPUCASA_2.4G"]
  - ["wifi.sta.pass", "Cuevademachos71"]
  - ["wifi.sta.enable", true]

  - ["mqtt.enable", "b", true, {title: "Enable MQTT"}]
  - ["mqtt.server", "s", "broker.emqx.io:1883", {title: "MQTT Server"}]
  - ["rpc.mqtt.enable", "b", true, {title: "Enable RPC over MQTT"}]
  - ["rpc.mqtt.pub_topic", "s", "rpc/pub", {title: "RPC Publish Topic"}]
  - ["rpc.mqtt.sub_topic", "s", "rpc/sub", {title: "RPC Subscribe Topic"}]

  - ["sys.mount.fs_size", "i", 2048, {title: "Filesystem size in KB"}]

  - ["dash.enable", "b", true, {title: "Enable mDash"}]
  - ["dash.token", "s", "4n8KckV1Ih99NrK7QTmZA91w", {title: "mDash token"}]
  - ["rpc.uart.enable", "b", true, {title: "Enable UART for RPC"}]

 # I2C
  - ["i2c.enable", "b", true, {title: "Enable I2C"}]
  - ["i2c.freq", "i", 100000, {title: "I2C Frequency (Hz)"}]
  - ["i2c.sda_gpio", "i", 21, {title: "I2C SDA GPIO Pin"}]
  - ["i2c.scl_gpio", "i", 22, {title: "I2C SCL GPIO Pin"}]

  - ["sntp.enable", true]
  - ["sntp.server", "pool.ntp.org"]
  - ["sntp.retry_min", 1]
  - ["sntp.retry_max", 30]
  - ["sntp.update_interval", 7200]


  - ["app.pin_machine", "i", 33, {title: "Pin number for machine control"}]
  - ["app.machine_on", "b", false, {title: "Machine on state"}]
  #- ["app.pin_relay", "i", 4, {title: "Pin number for machine control"}]
  - ["app.pin_relay", "i", 2, {title: "Pin number for machine control"}]
  - ["app.check_interval_ms", "i", 2000, {title: "Check interval in milliseconds"}]

